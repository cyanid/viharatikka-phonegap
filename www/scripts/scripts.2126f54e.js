"use strict";angular.module("shipdataClientApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","restangular","angularMoment"]).config(["$routeProvider","RestangularProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).otherwise({redirectTo:"/"}),b.setBaseUrl("https://lansisatama-shipdata.herokuapp.com/")}]),angular.module("shipdataClientApp").controller("MainCtrl",["$scope","Restangular","amMoment",function(a,b,c){c.changeLocale("fi"),a.shipDataReady=!1,a.shipData={},a.moreShipData=[],a.nextShipData={},a.previousShipData={},a.moreShips=!1,a.shipAmountOffset=0;var d=b.all("shipDataHistory");d.getList().then(function(b){a.previousShipData.shipName=b[b.length-3].shipName,a.previousShipData.firmName=b[b.length-2].firmName,a.previousShipData.arrivalTime=b[b.length-1].arrivalTime}),a.getMoreShips=function(){console.log("get more ships"),a.shipAmountOffset=a.shipAmountOffset+3,a.moreShipDataShip=a.shipData[0+a.shipAmountOffset].shipName,a.moreShipDataFirm=a.shipData[1+a.shipAmountOffset].firmName,a.moreShipDataArrivalTime=a.shipData[2+a.shipAmountOffset].arrivalTime,a.moreShips=!0,console.log(a.moreShipData)},a.fetchCurrent=function(){a.shipDataReady=!1,a.shipAmountOffset=0;var c=b.all("shipData");c.getList().then(function(b){(b[1+a.shipAmountOffset].firmName.indexOf("C & C Port Agency")>=0||b[1+a.shipAmountOffset].firmName.indexOf("ESL Shipping")>=0)&&(a.shipAmountOffset=a.shipAmountOffset+3);var c=new Date(b[2+a.shipAmountOffset].arrivalTime);c.getTime()<(new Date).getTime()&&(a.shipAmountOffset=a.shipAmountOffset+3),a.nextShipData.shipName=b[0+a.shipAmountOffset].shipName,a.nextShipData.firmName=b[1+a.shipAmountOffset].firmName,a.nextShipData.arrivalTime=b[2+a.shipAmountOffset].arrivalTime,a.shipData=b,a.shipDataReady=!0})},a.fetchCurrent()}]),angular.module("shipdataClientApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("shipdataClientApp").run(["$templateCache",function(a){a.put("views/main.html",'<div class="jumbotron"> <h2>Nyppiikö viharatikka?</h2> <p class="lead"> Alta näet seuraavan saapuvan laivan Helsingin Länsisatamaan. <br><br>Ratikat numero 9 (viharatikka) sekä 6T ovat yleensä laivan saapumisen jälkeen lähes käyttökelvottomia muille kulkijoille, joten arvioimalla ja vertaamalla laivan saapumisaikaa omaan aikatauluusi voit säästää ajan lisäksi hermojasi. </p> <p> <h5 style="margin-top: 20px; font-size: 16px">Seuraava saapuva laiva Länsisatamaan</h5> <button class="btn btn-lg" style="background-color: #EEEEEE; cursor: default" ng-show="!shipDataReady"> <span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> Hetko vaan... </button> <table class="table" ng-show="shipDataReady" style="font-size: 20px; max-width: 450px; margin-left: auto; margin-right: auto"> <tbody> <td>{{ nextShipData.firmName }}</td> <td>{{ nextShipData.shipName}}</td> <td>{{ nextShipData.arrivalTime | amDateFormat:\'DD.MM.YYYY HH:mm\' }}</td> </tbody> </table> </p> <h5 style="margin-top: 20px; font-size: 16px">Edellinen saapunut laiva Länsisatamaan</h5> <button class="btn btn-lg" style="background-color: #EEEEEE; cursor: default" ng-show="!shipDataReady"> <span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> Hetko vaan... </button> <table class="table" ng-show="shipDataReady" style="font-size: 20px; max-width: 450px; margin-left: auto; margin-right: auto"> <tbody> <td>{{ previousShipData.firmName }}</td> <td>{{ previousShipData.shipName}}</td> <td>{{ previousShipData.arrivalTime | amDateFormat:\'DD.MM.YYYY HH:mm\' }}</td> </tbody> </table>  <p> Voit myös aina tarkistaa Länsisataman nykyisen liikennetilanteen <a target="_blank" href="https://goo.gl/maps/ktRfaXuMw7G2">Googlen kartasta</a>. </p> <p ng-show="shipDataReady" style="margin-top: 30px"> <button class="btn-sm btn-primary" ng-click="fetchCurrent()"> Päivitä tiedot </button> <button class="btn-sm btn-primary" ng-click="getMoreShips()"> Näytä vielä seuraava laiva </button> <table class="table more-ships" style="font-size: 20px; max-width: 450px; margin-left: auto; margin-right: auto" ng-show="moreShips"> <tbody> <td>{{ moreShipDataFirm }}</td> <td>{{ moreShipDataShip }}</td> <td>{{ moreShipDataArrivalTime | amDateFormat:\'DD.MM.YYYY HH:mm\' }}</td> </tbody> </table> </p> <p style="margin-top: 50px"> Tiedotan sovelluksen uusista ominaisuuksista ja muusta aiheeseen liittyvästä <a target="_blank" href="https://www.facebook.com/viharatikka.info/">Facebook-sivulla</a>. </p> </div> <div class="row marketing"> </div>')}]);